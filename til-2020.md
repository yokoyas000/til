# 2020

---
## 2020-04-05
---
### xdebug ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ„å‘³
- å‚è€ƒ : [[PHP] Xdebug ã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒãƒƒã‚°ã€ç†è§£ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ](https://qiita.com/castaneai/items/d5fdf577a348012ed8af)
- `xdebug.remote_connect_back=1` ã‚’æŒ‡å®šã—ã¦ã„ã‚Œã°ã€hostã‚’æŒ‡å®šã—ãªãã¦å¤§ä¸ˆå¤«
- ã‚‚ã—æŒ‡å®šãŒå¿…è¦ã«ãªã£ãŸã‚‰ `xdebug.remote_host=10.0.2.2` ã¨ã„ã†ã®ãŒã‚ã‚‹
    - ã€Œ10.0.2.2ã€ã¯ vgrant ã®æ™‚ã®ãŠç´„æŸã‚‰ã—ã„ã€‚
    - `vagrant ssh` ã—ãŸæ™‚ã«ã‚‚ `Last login: Sun Apr  5 11:07:58 2020 from 10.0.2.2` ã¨ã‹å‡ºã‚‹
    - **è¿½è¨˜ 2020/0408:** ãƒ†ã‚¹ãƒˆã«ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã—ã“ã‚“ã§phpunitå®Ÿè¡Œã—ãŸæ™‚ã¨ã‹ã€ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œæ™‚ã« xdebug åˆ©ç”¨ã—ãŸã„æ™‚ç”¨ã€‚

### homestead ã¨ vscode ã§ xdebug ã‚’åˆ©ç”¨ã—ãŸã„å ´åˆ
- homestead å´ã¯è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ç‰¹ã«å¤‰æ›´ã¯å¿…è¦ãªã„
- vscode å´ã« `PHP Debug` ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã€ã©ã“ãã«ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’ä»•è¾¼ã‚“ã§F5ã§ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒãƒƒã‚°ã‚’é–‹å§‹ã™ã‚Œã°okã€‚
    - å‚è€ƒ : [Laravel Homestead + Visual Studio Code + Xdebugã§ãƒ‡ãƒãƒƒã‚°ç’°å¢ƒæ§‹ç¯‰](https://qiita.com/itigoore01/items/c0e8ef5756503ef588d1)
    - ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒãƒƒã‚°é–‹å§‹ã—å¿˜ã‚Œã¦ã€Œå‹•ã‹ãªã„(æ³£)ã€ã£ã¦ãªã£ã¦ãŸ...

---
## 2020-04-07
---
### Laravel ã® make:auth ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒå¤‰ã‚ã‚‹
- å‚è€ƒ: [Laravelã®Authèªè¨¼æ©Ÿèƒ½ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—æ„å›³ã—ãŸæŒ™å‹•ã¸å¤‰æ›´ã™ã‚‹Tips](https://www.ritolab.com/entry/86)
- `routes/web.php` ã®è¨˜è¿°ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã¨ Auth ç³»ã®ãƒ«ãƒ¼ãƒˆãŒæ¶ˆãˆã‚‹
    ```php:routes/web.php
    Auth::routes();
    ```
    - `php artisan route:list` ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã§ãã‚‹

- å®Ÿéš›ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šã‚’è¡Œãªã£ã¦ã„ã‚‹ã®ã¯ `Laravel/ui/src/AuthRouteMethods.php`
    ```php:Laravel/ui/src/AuthRouteMethods.php
    namespace Laravel\Ui;

    class AuthRouteMethods
    {
        /**
         * Register the typical authentication routes for an application.
         */
        public function auth()
        {
            return function ($options = []) {
                // Authentication Routes...
                $this->get('login', 'Auth\LoginController@showLoginForm')->name('login');
                $this->post('login', 'Auth\LoginController@login');
                $this->post('logout', 'Auth\LoginController@logout')->name('logout');

                // Registration Routes...
                if ($options['register'] ?? true) {
                    $this->get('register', 'Auth\RegisterController@showRegistrationForm')->name('register');
                    $this->post('register', 'Auth\RegisterController@register');
                }

                // ...

                // Password Confirmation Routes...
                if ($options['confirm'] ??
                    class_exists($this->prependGroupNamespace('Auth\ConfirmPasswordController'))) {
                    $this->confirmPassword();
                }

                // ...
            };
        }

    }
    ```
    - ã“ã“ã®å‡¦ç†ã«è¡Œãç€ãã¾ã§ã®æµã‚ŒãŒã‚ˆãã‚ã‹ã‚‰ã‚“...

---
## 2020-04-08
---
### vscode ã®å˜èªæ¤œç´¢ã§å‹æ‰‹ã«é™¤å¤–ã•ã‚Œã‚‹ãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚‹
- ã©ã†ã‚„ã‚‰ gitignore ã«æŒ‡å®šã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ¤œç´¢ã‹ã‚‰é™¤å¤–ã™ã‚‹ã®ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã‚‰ã—ã„
- vscode ã® `setting.json` ã«ä»¥ä¸‹ã‚’è¨˜è¿°
    ```json:setting.json
    "search.useIgnoreFiles": false,
    ```
    - å‚è€ƒ: [VSCodeã§vendoré…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ¤œç´¢ã§ããªã„](https://lighthouse-dev.github.io/vscode-search-setting/)
    - `cmd + p` ã®ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã‚„ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ã«ã‚‚å½±éŸ¿ã—ã¦ã‚‹ã£ã½ã„ï¼Ÿå¿«é©ã«ãªã£ãŸã€‚

---
## 2020-04-09
---
### Laravel ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚“ã§ã‚‚å…¨ç„¶ã‚ã‹ã‚‰ã‚“
Laravel ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã¨ã‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãŒä½•ãªã®ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚“ã§ã‚‚å…¨ç„¶ã‚ã‹ã‚‰ã‚“ã‹ã£ãŸã‘ã©å…¬å¼ã˜ã‚ƒãªã„ã¨ã“ã‚ã«ã‚ã‹ã‚Šã‚„ã™ã„èª¬æ˜ã‚’æ›¸ã„ã¦ãã‚Œã¦ã„ã‚‹äººãŒã„ãŸ
- [Laravel ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã®ç†è§£ã‚’æ·±ã‚ã‚‹](https://reffect.co.jp/laravel/laravel-service-container-understand)
    - ã‚³ãƒ³ãƒ†ãƒŠã¸ã®ç™»éŒ²ã¯ `ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€` ãŒè¡Œãªã£ã¦ã„ã‚‹
    - `app()->bind()` ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ä¾å­˜é–¢ä¿‚è§£æ±ºã‚‚ã§ãã‚‹
- [Laravel ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¤ã„ã«ç†è§£](https://reffect.co.jp/laravel/laravel-service-provider-understand)
    - è¨­å®šã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ãŒã©ã“ã«ã‚ã‚‹ã®ã‹ã¨ã‹æ›¸ã„ã¦ã‚ã£ã¦è‰¯ã„
    - `public/index.php` -> `bootstrap/app.php`(providers ã®æŒ‡å®šã¯ `config/app.php`) -> `Illuminate/Foundation/Application.php`
        - ProviderRepository::load($providers) ã®ä¸­ã§ã€ Application::registor($providers) ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹
    ```php:Illuminate/Foundation/Application.php
    public function registerConfiguredProviders()
    {
        $providers = Collection::make($this->config['app.providers'])
                        ->partition(function ($provider) {
                            return strpos($provider, 'Illuminate\\') === 0;
                        });

        $providers->splice(1, 0, [$this->make(PackageManifest::class)->providers()]);

        (new ProviderRepository($this, new Filesystem, $this->getCachedServicesPath()))
                    ->load($providers->collapse()->toArray());
    }
    ```
- "ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼"ã¨ã‹ã®å‘½åãŒ DI ã®æ–‡è„ˆã‚‰ã—ã„

### web.php ã® Route::get ã‹ã‚‰ Facade ã‚’ç†è§£ã™ã‚‹
- [Laravel ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰(Facade)ã‚’ç†è§£ã™ã‚‹](https://reffect.co.jp/laravel/laravel-facade-understanding)

1. web.php` ã®è¨˜è¿°
    ```php:web.php
    use Illuminate\Support\Facades\Route;

    Route::get('/', function () {       // ğŸ‘ˆ æ³¨ç›®
        return view('welcome');
    });
    ```
2. `Illuminate\Support\Facades\Route.php` ã®è¨˜è¿°
    ```php:Illuminate\Support\Facades\Route.php
    class Route extends Facade              // ğŸ‘ˆ æ³¨ç›®
    {
        protected static function getFacadeAccessor()
        {
            return 'router';
        }
    }
    ```
3. `Illuminate\Support\Facades\Facade.php` ã®è¨˜è¿°
    ```php:Facade.php
    abstract class Facade
    {
        public static function __callStatic($method, $args)     // ğŸ‘ˆ æ³¨ç›®
        {
            $instance = static::getFacadeRoot();                // ğŸ‘ˆ æ³¨ç›®

            if (! $instance) {
                throw new RuntimeException('A facade root has not been set.');
            }

            return $instance->$method(...$args);
        }
    }
    ```
    `Route::get()` ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ã¯ã“ã“ã€‚<br>
    `static::getFacadeRoot()` ã‚’ãŸã©ã‚‹ã¨ã€æœ€çµ‚çš„ã« `app()->make('router')` ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

4. `Illuminate\Routing\RoutingServiceProvider` ã®è¨˜è¿°
    ```php:RoutingServiceProvider.php
    class RoutingServiceProvider extends ServiceProvider
    {
        protected function registerRouter()
        {
            $this->app->singleton('router', function ($app) {     // ğŸ‘ˆ æ³¨ç›®
                return new Router($app['events'], $app);
            });
        }
    }
    ```
    `RoutingServiceProvider` ã§ `Illuminate\Routing\Router` ãŒ 'router' ã¨ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚

5. `\Illuminate\Routing\Router` ã®è¨˜è¿°
    ```php:Router.php
    class Router implements BindingRegistrar, RegistrarContract
    {
        public function get($uri, $action = null)               // ğŸ‘ˆ ç™ºè¦‹ï¼
        {
            return $this->addRoute(['GET', 'HEAD'], $uri, $action);
        }
    }
    ```

- Qï¼†A
    - Q: ãªã‚“ã§ã“ã‚“ãªã¾ã©ã‚ã£ã“ã—ã„ã“ã¨ã™ã‚‹ã‚“ã˜ã‚ƒ
    - A1: é™çš„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹(ãƒ¢ãƒƒã‚¯ã—ãŸã‚Šã‚¹ã‚¿ãƒ–ã—ãŸã‚Šã™ã‚‹)ãŸã‚ã ã‚ˆ
        > ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã•ã¾ã–ã¾ãªæ©Ÿèƒ½ã‚’**ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ**ã™ã‚‹ãŸã‚ã«ã€Laravelã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨èˆ¬ã§ãŸãã•ã‚“ã®ä¾‹ãŒãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

        > æœ¬å½“ã®é™çš„ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’**ãƒ¢ãƒƒã‚¯ã—ãŸã‚Šã€ã‚¹ã‚¿ãƒ–ã«ã—ãŸã‚Š**ã™ã‚‹ã®ã¯é€šå¸¸ä¸å¯èƒ½ã§ã™ã€‚ã—ã‹ã—ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠãŒä¾å­˜è§£æ±ºã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä»£æ›¿ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ãŸã‚ã«å‹•çš„ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹ãŸã‚ã€æ³¨å…¥ã—ãŸã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã®ã¨åŒæ§˜ã«ã€**ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã‚’å®Ÿéš›ã«ãƒ†ã‚¹ãƒˆå¯èƒ½ã§ã™ã€‚**

        > å¼•ç”¨å…ƒ:<cite>[ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ 7.x Laravel](https://readouble.com/laravel/7.x/ja/facades.html)</cite>
    - A2: ãƒ†ã‚¹ãƒˆã—ã‚„ã™ãã—ã¤ã¤ã€æœ¬ä½“ã®å®Ÿè£…ã§ã‚‚ä½¿ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã ã‚ˆ
        > _...(ä¸­ç•¥)..._ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚Œã°åŒã˜ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’ä¿ã¡ãªãŒã‚‰ã‚‚ã€æ˜ç¢ºã«Publisherã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ¸¡ã™å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚

        > å¼•ç”¨å…ƒ:<cite>[ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ 7.x Laravel](https://readouble.com/laravel/7.x/ja/facades.html)</cite>
